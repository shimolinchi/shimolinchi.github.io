---
layout:     post
title:      数字图像处理笔记
subtitle:   
date:       2025-1-1
author:     试墨临池
header-img: img/2025-1-1数字图像处理笔记/background.png
catalog: true
tags:
    - 数字图像处理
    - 笔记
---


## 图像的存储

图像有单通道和多通道之分，图像按照多维数组方式存储，如这是一种图像存储方式，Width为单通道的宽，height为单通道的高，channel为通道数，通道按照**红蓝绿**顺序访问

```C++
image[nWidth][nHeight][nChannel];
```

### opencv 图像存储格式

opencv中，存储图像使用的是Mat结构（也是一个矩阵）。
初始化可以用：

```C++
cv::Mat mat;
cv::Mat mat(rows, cols, type);
cv::Mat mat = cv::Mat::zeros(rows, cols, type);
```

type: 数据类型和通道数，常用类型如下：
+ CV_8UC1：单通道 8 位无符号整数（灰度图）。
+ CV_8UC3：三通道 8 位无符号整数（彩色图像，如 BGR）。
+ CV_32FC1：单通道 32 位浮点数（常用于计算机视觉中的图像处理）。

Mat的主要成员如下：

+ data:指向矩阵数据的指针。
+ rows/cols/channels(): 行数、列数、通道数
+ type():返回矩阵的数据类型和通道数
+ clone()、copyTo(newmat):数据全复制

## 仿射变换

仿射变换 = 线性变换（旋转、切边、缩放） + 平移
+ 缩放
$$
\left(
\begin{matrix}
x'\\
y'
\end{matrix}
\right)
=
\left(
\begin{matrix}
s_x & 0\\
0 & s_y
\end{matrix}
\right)
\left(
\begin{matrix}
x\\
y
\end{matrix}
\right)
$$

+ 切变

$$
\left(
\begin{matrix}
x'\\
y'
\end{matrix}
\right)
=
\left(
\begin{matrix}
1 & a\\
0 & 1
\end{matrix}
\right)
\left(
\begin{matrix}
x\\
y
\end{matrix}
\right)
$$

+ 旋转
$$
\left(
\begin{matrix}
x'\\
y'
\end{matrix}
\right)
=
\left(
\begin{matrix}
cos\theta & -sin\theta\\
sin\theta & cos\theta
\end{matrix}
\right)
\left(
\begin{matrix}
x\\
y
\end{matrix}
\right)
$$

## 灰度变换

常见的灰度变换：
+ 图像灰度反转
$$s = L - 1 - r$$
+ 对数变换
$$s = c\cdot log_{v+1}(1+v\cdot r)$$
+ Gamma变换
$$s = cr^\gamma$$
+ 直方图均衡化