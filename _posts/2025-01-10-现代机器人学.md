---
layout:     post
title:      现代机器人学
subtitle:   
date:       2025-1-10
author:     试墨临池
header-img: img/2025-01-10-现代机器人学/background.jpg
catalog: true
tags:
    - 机器人
    - 笔记
---
## 前言

> 本文整理了一些关于《现代机器人：力学，规划，控制》（Modern Robotics: Mechanics, Planning, and Control）的部分内容，为机器人学的部分的第二篇笔记，之前的机器人机构学部分在[这里](https://wangrui.tech/2024/10/20/%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%9C%BA%E6%9E%84%E5%AD%A6%E7%AC%94%E8%AE%B0/)，手写的有些粗糙且不全面。本文整理的现代机器人学部分将涵盖部分其内容，并尽量结合我自己的理解通俗解释。

## 配置空间 Configuration Space（C Space）

### 配置空间和自由度

C空间是Configuration Space的缩写，如下是对C空间的定义。

机器人的配置是对机器人每个点位置的完整规范。表示配置所需的最小实值坐标数 n 是机器人的自由度数 （dof）。包含机器人所有可能配置的 n 维空间称为配置空间 （C-space）。机器人的配置由其 C 空间中的一个点表示。

常用自由度的求法：自由度 = 点的自由度之和 - 独立约束的数目

用系统变量与方程数表示：自由度 = 变量数 - 独立方程数

公式表示(格鲁布勒公式)：$dof = m(N-1) - \underset{i=1}{\overset{J}{\Sigma}}c_i$$

### 拓扑学

一个球面上的点的空间是二维的，平面上的点也是二维的。

如果一个空间可以在**不切割或粘合**的情况下不断变形成另一个空间，那么这两个空间在拓扑上是**等价的**。说明：球面和平面不等价，因为球面经过**切割**和伸展才能变成平面。

拓扑上不同的一维空间包括圆、直线和直线的闭合区间。 圆被数学的描述为 $S$ 或 $S^1$ ,即一维球面，线被写作 $E$ 或 $E^1$ ，表示一维的欧几里德(或“平坦”)空间

在高维中，$R^n$ 是n维欧几里德空间，$S^n$ 是(n + 1)维空间中球面的n维曲面，例如， $S^2$ 是三维空间中球体的二维表面。

空间的拓扑是空间本身的一个**基本属性**，与我们如何选择坐标来表示空间中的点无关。

下面说明对于空间中点的描述存在**奇点**的问题。什么？你不知道奇点是什么？举个例子：对于一个球面空间，当用经纬坐标来表示点的位置的时候，南北极的位置就是奇点。在奇点处，一点点位移会导致很大的坐标变化，因此在奇点的位置速度可能会趋于无穷。那如何解决？

+ 在空间上使用多个坐标图，其中每个坐标图都是只覆盖空间的一部分的显式参数化，这样在每个图中就没有奇点。
+ 使用隐式表示，而不是显式参数化。 隐式表示法将n维空间视为嵌入在超过n维的欧几里德空间中，就像一个二维单位球可以被视为嵌入在三维欧几里德空间中的表面一样。 在之后的各个章节中将使用隐式表示。

这个隐式表示就是指用方程组来描述C空间。老子不用坐标表示就没奇点了很合理吧...同时，隐式表示也可以用方程组中的未知量组成的列向量表示，如四杆机构的C空间可表示为：

$$\theta = [\theta_1...\theta_n]^T\in R^n$$

这种形式的k（k<=n）个独立方程的loop-closure equations,这种约束被称为完整约束，它能降低C空间的维数,C空间可以看作是一个维数为n-k的曲面

$$g(\theta) = \left[
\begin{matrix}
g_1(\theta_1...\theta_n)\\
...\\
g_k(\theta_1...\theta_n)\\
\end{matrix}
\right] = 0$$

假设闭链机器人的 loop-closure equations为$g(\theta) = 0$,$g:R^n\rightarrow R^k$,以$\theta(t)$运动，也满足$g(\theta(t)) = 0$就有：

$$
\begin{align*}
    & 
    \frac{d}{dt}g(\theta(t)) = 0\ \ \ 
    & 
    \frac{dg}{dt}(\theta)\dot \theta = 0
    & && 
\end{align*}
$$

令$A(\theta)$为$g(\theta)$的积分则有：

$$A(\theta)\dot \theta = 0$$

这种形式的速度约束称为Pfaffian-constraints，$g(\theta)$的完全约束也被称为可积约束（integrable constraints），即它们所提供的速度约束可以积分得到等效的结构约束。

同时，还有$g(\theta)$不可积的情况，被称为非完整约束（nonholonomic constraint）这种约束降低了系统速度的维数，但没有降低C空间的维数，例子如下：

考虑一枚半径为r的硬币在如图所示的平面上滚动：

![](https://raw.githubusercontent.com/shimolinchi/shimolinchi.github.io/master/img/2025-01-10-现代机器人学/1.png)

硬币的外形由平面上的接触点(x, y)给出，转向角为$\phi$，旋转角为$\theta$，描述硬币的C空间就是$R^2\times T^2$(这里用了笛卡尔积，)，$T^2$是转向角$\phi$，旋转角$\theta$形成的二维环，整个C空间是四维的。
硬币滚动时没有滑动，做纯滚动，那么硬币向某个方向滚动的速度表示为：

$$
\left(
\begin{matrix}
\dot x\\
\dot y
\end{matrix}
\right) = r\dot \theta
\left(
\begin{matrix}
cos \phi\\
sin \phi
\end{matrix}
\right)
$$

把C空间中的四个坐标写成矢量：

$$q = [q_1\ q_2\ q_3\ q_4]^T = [x,y,\phi,\theta]$$

上述纯滚动约束可表示为：

$$
\left(
\begin{matrix}
1 & 0 & 0 -rcos q_3\\
0 & 1 & 0 -rsin q_3\\
\end{matrix}
\right) \dot q= 0
$$

上式就是Pfaffian-constraints 的形式了,这些约束条件是不可积的

### 任务空间和工作空间

任务空间是机器人任务可以自然表达的空间。

工作区是机器人的末端执行器可以达到的配置的规范。

挺好理解的就不解释了

## 刚体运动 Rigid-Body Motions

任何刚体运动都可以被分解为对固定参考系的平动以及绕固定轴的转动，运动合成之后形成类似螺旋的运动，即绕同一固定轴旋转和平移运动的合成。

本章把线速度和角速度表达成一个在 $R^6$ 中的向量，力矩和力也一样，力矩和力组成的向量被称为spatial force or wrench。

### 坐标变换

（平面的坐标变换还是那个经典例子）空间中坐标变换有多种方法：旋转矩阵（必须是正交阵）+向量法、三参数欧拉角、指数坐标、RPY角roll–pitch–yaw angles、Cayley–Rodrigues parameters、四元数等

#### 旋转矩阵+向量表示法

旋转矩阵性质：互逆$^A_BP = ^B_AP^{-1} = ^B_AP^T$

旋转矩阵法描述的坐标变换：$^AP = ^A_BR^BP + ^AP_{B0}$

旋转矩阵表示为：
$$R=Rot(\hat x, \theta)=\left(
\begin{matrix}
c_\theta+\hat \omega_1^2(1-c_\theta) & \hat\omega_1 \hat\omega_2(1-c_\theta)-\hat\omega_3s_\theta & \hat\omega_1 \hat\omega_3(1-c_\theta)+\hat\omega_2s_\theta \\

\hat\omega_1 \hat\omega_2(1-c_\theta)+\hat\omega_3s_\theta & c_\theta+\hat \omega_1^2(1-c_\theta) & \hat\omega_2 \hat\omega_3(1-c_\theta)-\hat\omega_2s_\theta \\

\hat\omega_1 \hat\omega_3(1-c_\theta)-\hat\omega_2s_\theta & \hat\omega_2 \hat\omega_3(1-c_\theta)+\hat\omega_1s_\theta & c_\theta+\hat \omega_3^2(1-c_\theta) \\
\end{matrix}
\right)$$

下面求解角速度与线速度

角速度与线速度关系为：

$$
\begin{align*}
    & 
    \dot{\hat x} = \omega\times \hat x \ \ 
    & 
    \dot{\hat y} = \omega\times \hat y \ \     
    &
    \dot{\hat z} = \omega\times \hat z \
    & && 
\end{align*}
$$

因此求得角速度就可以得到线速度

令R(t)为动系b相对于定系s的旋转矩阵，则它对时间的一阶导数为$\dot R(t)$

$$\dot R(t) = [\omega_s\times r_1,\omega_s\times r_2,\omega_s\times r_3] = \omega\times R$$

其中，
$$\omega_s = \left(
\begin{matrix}
0 & -\omega_z & \omega_y\\
\omega_z & 0 &-\omega_x \\
-\omega_y & \omega_x & 0
\end{matrix}
\right)$$

由斜对称矩阵性质：$R[\omega]R^T = [R\omega]\quad$   (向量$\omega$的斜对称矩阵为$[\omega]$)

可得：$\dot R = [\omega_s]R$

由此求出在定系中的角速度：

$$[\omega_s] = \dot RR^{-1}$$

在动系中的角速度为：

$$[\omega_b] = [R_{sb}^{-1}\omega_s] = R_{sb}^T[\omega_s]R_{sb} = R^T\dot R = R^{-1}\dot R$$

因此角速度在不同坐标之间变换和位置坐标变换相同

#### 指数坐标表示法